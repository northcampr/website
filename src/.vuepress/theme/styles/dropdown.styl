@import '_variables'

.dropdown-wrapper
  cursor pointer

  .dropdown-title
    display block
    padding inherit
    border none
    background transparent
    font-weight 500
    font-size .9rem
    font-family inherit
    line-height 1.4rem
    cursor inherit

    // color: #3eaf7c;
    &:hover
      border-color transparent

    .arrow
      margin-top -1px
      margin-left .4rem
      vertical-align middle

  .mobile-dropdown-title
    @extend .dropdown-title
    display none
    font-weight 600
    font-size inherit

    &:hover
      color $accentColor

  .nav-dropdown
    .dropdown-item
      color inherit
      line-height 1.7rem

      .dropdown-subtitle
        margin .45rem 0 0
        padding 1rem 0 .45rem
        border-top 1px solid #eee
        font-size .9rem
        font-family $font-stack-text

        & > span
          padding 0 1.5rem 0 1.25rem

        & > a
          font-weight inherit

          &.router-link-active
            &::after
              display none

      .dropdown-subitem-wrapper
        padding 0
        list-style none

        .dropdown-subitem
          font-size .9em

      a
        position relative
        display block
        margin-bottom 0
        padding 0 1.5rem 0 1.25rem
        border-bottom none
        font-weight 400
        line-height 1.7rem

        &:hover
          color $accentColor

        &.router-link-active
          color $accentColor

          &::after
            position absolute
            top calc(50% - 2px)
            left 9px
            width 0
            height 0
            border-top 3px solid transparent
            border-bottom 3px solid transparent
            border-left 5px solid $accentColor
            content ''

      &:first-child .dropdown-subtitle
        margin-top 0
        padding-top 0
        border-top 0

@media (max-width $MQMobile)
  .dropdown-wrapper
    &.open .dropdown-title
      margin-bottom .5rem

    .dropdown-title
      display none

    .mobile-dropdown-title
      display block

    .nav-dropdown
      overflow hidden
      transition height .1s ease-out

      .dropdown-item
        .dropdown-subtitle
          margin-top 0
          padding-top 0
          padding-bottom 0
          border-top 0

        .dropdown-subtitle, & > a
          font-size 15px
          line-height 2rem

        .dropdown-subitem
          padding-left 1rem
          font-size 14px

@media (min-width $MQMobile)
  .dropdown-wrapper
    height 1.8rem

    &:hover .nav-dropdown, &.open .nav-dropdown
      // override the inline style.
      display block !important

    &.open:blur
      display none

    .nav-dropdown
      position absolute
      top 100%
      right 0
      display none
      overflow-y auto
      box-sizing border-box
      margin 0
      padding .6rem 0
      max-height calc(100vh - 2.7rem)
      // Avoid height shaked by clicking
      height auto !important
      border 1px solid #ddd
      border-bottom-color #ccc
      border-radius .25rem
      background-color #fff
      text-align left
      white-space nowrap

/**
 * transition
 */
.dropdown-enter-from, .dropdown-leave-to
  height 0 !important

/**
 * dark mode
 */
@media screen and (prefers-color-scheme dark)
  .dropdown-wrapper
    .nav-dropdown
      background-color rgba(0, 0, 0, .85)

    .nav-dropdown, .nav-dropdown .dropdown-item .dropdown-subtitle
      border-color #666

    .mobile-dropdown-title
      color inherit

      .title
        color inherit

  .mobile-dropdown-wrapper
    .mobile-dropdown-title
      color inherit

      .title
        color inherit